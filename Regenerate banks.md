draft!

`.stg` files are stage banks generated by the `stagepack` utility. To build it and other utilities you'll need a MSYS2/MinGW install on Windows or gcc and make on Linux.
When you have that set up, execute this in the MINGW64 prompt on Windows or your terminal on Linux:
```
cd tools
make
```

Copy the `data` directory from the PC version of CS to the `tools` directory (do not overwrite anything) and make the necessary changes to it. 
You can then rebuild the stagebanks like so:
```
./stagepack.exe  stagelists/stage_all.lst data ../data
```

All the `.stg` files in `doukutsupsx/data` will be updated.

You will need to edit the font as well. 
It can't actually be expanded to include Cyrillic characters without modifying the source code, 
but maybe you can just replace the Latin characters. 
The font is located in `tools/data/FontAscii.pbm`, which is just a 4 bit BMP file. After editing it, you need to regenerate the `main.gfx` graphics bank:
```
./surfpack.exe surflists/surf_main.lst ../data/main/main.gfx
```
If you wish, you can try modifying `tools/src/fontgen.cpp` to generate a bigger font that includes Cyrillic first, 
but I can't say if this will require any extra modifications for anything. This is the command that was used to generate `FontAscii.pbm`:
```
./fontgen.cpp -a "MS Gothic" 6 12 FontAscii.pbm
```
If you're on Linux or maybe WSL, this might be because the stage file is called `Lounge` instead of `lounge`, in which case you can just rename it either on disk or in `tools/data/stagelists/stage_all.lst`.
If you're actually missing that file for whatever reason and you're sure it's not necessary, you'll have to delete the whole line where it's mentioned from `tools/data/stagelists/stage_all.lst`.

You'll need to regenerate the instrument banks for the music then.
For that you need the `Wave.dat` file and the .org music files, which are embedded into `Doukutsu.exe` in the PC version.
You can open the EXE with Resource Editor or 7-zip, the .dat file is called WAVE100. Extract it and place it at `tools/data/Wave.dat`. The .org files are in `1041/ORG`.

If you don't want to bother, I've attached my .org files and wave.dat. Just extract the zip into the `tools/data folder`.

[data.zip](https://github.com/Dima353/doukutsupsx/files/12926193/data.zip)

Afterwards, run
```
cd tools

mkdir -p data/sfxbnk
./make_banks.sh data/org data/Wave.dat data/sfxbnk 484912
```
Then run `stagepack` again.

If you saved it as UTF-8 or something, that won't work.
The extra TSC files (Credit.tsc, ArmsItem.tsc, StageSel.tsc) have to be recompiled into BSC if you change them, e.g.:
```
cd tools
./tscc.exe data/ArmsItem.tsc ../data/main/ArmsItem.bsc
```
